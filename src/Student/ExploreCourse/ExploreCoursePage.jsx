import { projects as allProjects } from '../../data/courseData';
import '../Overview/overview.css';
import '../MyCourse/mycourse.css';
import './explorecourse.css';
import ExploreCourseSearchbar from './ExploreCourseSearchbar';
import React, { useState, useEffect } from 'react';


export default function ExploreCoursePage   (){

    const [user, setUser] = useState(null);
    const [searchQuery, setSearchQuery] = useState('');
    const [projects, setProjects] = useState(allProjects);

    useEffect(() => {
        const storedUser = localStorage.getItem('user');
        if (storedUser) {
        setUser(JSON.parse(storedUser));
        }
    }, []);

    const fullName = user?.name;

    const handleSearch = (query) => {
        setSearchQuery(query);
        const lower = query.toLowerCase();
        const filtered = allProjects.filter((p) =>
            p.title.toLowerCase().includes(lower) ||
            (p.mentor && p.mentor.toLowerCase().includes(lower))
        );
        setProjects(filtered);
    };


    
    return(
        <div className="MyCourse-wrapper">
            <div className="l1">Explore Courses</div>
            <div className="l2">
                <div className="l21"><ExploreCourseSearchbar onSearch={handleSearch}/> </div>
                <div className="l22">
                    <div className="a">
                        <div className="a1">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.5 15.625H16.875V3.125C16.875 2.95924 16.8092 2.80027 16.6919 2.68306C16.5747 2.56585 16.4158 2.5 16.25 2.5H11.875C11.7092 2.5 11.5503 2.56585 11.4331 2.68306C11.3158 2.80027 11.25 2.95924 11.25 3.125V6.25H7.5C7.33424 6.25 7.17527 6.31585 7.05806 6.43306C6.94085 6.55027 6.875 6.70924 6.875 6.875V10H3.75C3.58424 10 3.42527 10.0658 3.30806 10.1831C3.19085 10.3003 3.125 10.4592 3.125 10.625V15.625H2.5C2.33424 15.625 2.17527 15.6908 2.05806 15.8081C1.94085 15.9253 1.875 16.0842 1.875 16.25C1.875 16.4158 1.94085 16.5747 2.05806 16.6919C2.17527 16.8092 2.33424 16.875 2.5 16.875H17.5C17.6658 16.875 17.8247 16.8092 17.9419 16.6919C18.0592 16.5747 18.125 16.4158 18.125 16.25C18.125 16.0842 18.0592 15.9253 17.9419 15.8081C17.8247 15.6908 17.6658 15.625 17.5 15.625ZM12.5 3.75H15.625V15.625H12.5V3.75ZM8.125 7.5H11.25V15.625H8.125V7.5ZM4.375 11.25H6.875V15.625H4.375V11.25Z" fill="#525255"/></svg>
                        </div>
                        <div className="a2">Category</div>
                    </div>
                    <div className="a">
                        <div className="a1">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.25 0.125001C2.63193 0.125001 2.02775 0.308279 1.51384 0.651659C0.999941 0.995038 0.599402 1.4831 0.362878 2.05412C0.126354 2.62513 0.0644686 3.25347 0.185047 3.85966C0.305626 4.46585 0.603254 5.02267 1.04029 5.45971C1.47733 5.89675 2.03415 6.19438 2.64034 6.31496C3.24654 6.43553 3.87487 6.37365 4.44589 6.13713C5.01691 5.9006 5.50496 5.50006 5.84834 4.98616C6.19172 4.47225 6.375 3.86807 6.375 3.25C6.375 2.4212 6.04576 1.62634 5.45971 1.04029C4.87366 0.454242 4.0788 0.125001 3.25 0.125001ZM3.25 5.125C2.87916 5.125 2.51665 5.01503 2.20831 4.80901C1.89996 4.60298 1.65964 4.31014 1.51773 3.96753C1.37581 3.62492 1.33868 3.24792 1.41103 2.88421C1.48338 2.52049 1.66195 2.1864 1.92418 1.92418C2.1864 1.66195 2.52049 1.48338 2.88421 1.41103C3.24792 1.33868 3.62492 1.37581 3.96753 1.51773C4.31014 1.65964 4.60298 1.89996 4.80901 2.20831C5.01503 2.51665 5.125 2.87916 5.125 3.25C5.125 3.74728 4.92746 4.2242 4.57583 4.57583C4.2242 4.92746 3.74728 5.125 3.25 5.125ZM10.75 6.375C11.3681 6.375 11.9723 6.19172 12.4862 5.84834C13.0001 5.50496 13.4006 5.01691 13.6371 4.44589C13.8736 3.87487 13.9355 3.24654 13.815 2.64034C13.6944 2.03415 13.3967 1.47733 12.9597 1.04029C12.5227 0.603254 11.9658 0.305626 11.3597 0.185047C10.7535 0.0644686 10.1251 0.126354 9.55412 0.362878C8.9831 0.599402 8.49504 0.999941 8.15166 1.51384C7.80828 2.02775 7.625 2.63193 7.625 3.25C7.625 4.0788 7.95424 4.87366 8.54029 5.45971C9.12634 6.04576 9.9212 6.375 10.75 6.375ZM10.75 1.375C11.1208 1.375 11.4834 1.48497 11.7917 1.691C12.1 1.89702 12.3404 2.18986 12.4823 2.53247C12.6242 2.87508 12.6613 3.25208 12.589 3.6158C12.5166 3.97951 12.338 4.3136 12.0758 4.57583C11.8136 4.83805 11.4795 5.01663 11.1158 5.08897C10.7521 5.16132 10.3751 5.12419 10.0325 4.98228C9.68986 4.84036 9.39702 4.60004 9.191 4.2917C8.98497 3.98335 8.875 3.62084 8.875 3.25C8.875 2.75272 9.07255 2.27581 9.42418 1.92418C9.77581 1.57255 10.2527 1.375 10.75 1.375ZM3.25 7.625C2.63193 7.625 2.02775 7.80828 1.51384 8.15166C0.999941 8.49504 0.599402 8.9831 0.362878 9.55412C0.126354 10.1251 0.0644686 10.7535 0.185047 11.3597C0.305626 11.9658 0.603254 12.5227 1.04029 12.9597C1.47733 13.3967 2.03415 13.6944 2.64034 13.815C3.24654 13.9355 3.87487 13.8736 4.44589 13.6371C5.01691 13.4006 5.50496 13.0001 5.84834 12.4862C6.19172 11.9723 6.375 11.3681 6.375 10.75C6.375 9.9212 6.04576 9.12634 5.45971 8.54029C4.87366 7.95424 4.0788 7.625 3.25 7.625ZM3.25 12.625C2.87916 12.625 2.51665 12.515 2.20831 12.309C1.89996 12.103 1.65964 11.8101 1.51773 11.4675C1.37581 11.1249 1.33868 10.7479 1.41103 10.3842C1.48338 10.0205 1.66195 9.6864 1.92418 9.42418C2.1864 9.16195 2.52049 8.98338 2.88421 8.91103C3.24792 8.83868 3.62492 8.87581 3.96753 9.01773C4.31014 9.15964 4.60298 9.39997 4.80901 9.70831C5.01503 10.0166 5.125 10.3792 5.125 10.75C5.125 11.2473 4.92746 11.7242 4.57583 12.0758C4.2242 12.4275 3.74728 12.625 3.25 12.625ZM10.75 7.625C10.1319 7.625 9.52775 7.80828 9.01384 8.15166C8.49994 8.49504 8.0994 8.9831 7.86288 9.55412C7.62635 10.1251 7.56447 10.7535 7.68505 11.3597C7.80563 11.9658 8.10325 12.5227 8.54029 12.9597C8.97733 13.3967 9.53415 13.6944 10.1403 13.815C10.7465 13.9355 11.3749 13.8736 11.9459 13.6371C12.5169 13.4006 13.005 13.0001 13.3483 12.4862C13.6917 11.9723 13.875 11.3681 13.875 10.75C13.875 9.9212 13.5458 9.12634 12.9597 8.54029C12.3737 7.95424 11.5788 7.625 10.75 7.625ZM10.75 12.625C10.3792 12.625 10.0166 12.515 9.70831 12.309C9.39997 12.103 9.15964 11.8101 9.01773 11.4675C8.87581 11.1249 8.83868 10.7479 8.91103 10.3842C8.98338 10.0205 9.16195 9.6864 9.42418 9.42418C9.6864 9.16195 10.0205 8.98338 10.3842 8.91103C10.7479 8.83868 11.1249 8.87581 11.4675 9.01773C11.8101 9.15964 12.103 9.39997 12.309 9.70831C12.515 10.0166 12.625 10.3792 12.625 10.75C12.625 11.2473 12.4275 11.7242 12.0758 12.0758C11.7242 12.4275 11.2473 12.625 10.75 12.625Z" fill="#525255"/></svg>

                        </div>
                        <div className="a2">Category</div>
                    </div>
                    <div className="a b">
                        <div className="a1">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.625 10.625C15.625 10.7908 15.5592 10.9497 15.4419 11.0669C15.3247 11.1842 15.1658 11.25 15 11.25H5C4.83424 11.25 4.67527 11.1842 4.55806 11.0669C4.44085 10.9497 4.375 10.7908 4.375 10.625C4.375 10.4592 4.44085 10.3003 4.55806 10.1831C4.67527 10.0658 4.83424 10 5 10H15C15.1658 10 15.3247 10.0658 15.4419 10.1831C15.5592 10.3003 15.625 10.4592 15.625 10.625ZM18.125 6.25H1.875C1.70924 6.25 1.55027 6.31585 1.43306 6.43306C1.31585 6.55027 1.25 6.70924 1.25 6.875C1.25 7.04076 1.31585 7.19973 1.43306 7.31694C1.55027 7.43415 1.70924 7.5 1.875 7.5H18.125C18.2908 7.5 18.4497 7.43415 18.5669 7.31694C18.6842 7.19973 18.75 7.04076 18.75 6.875C18.75 6.70924 18.6842 6.55027 18.5669 6.43306C18.4497 6.31585 18.2908 6.25 18.125 6.25ZM11.875 13.75H8.125C7.95924 13.75 7.80027 13.8158 7.68306 13.9331C7.56585 14.0503 7.5 14.2092 7.5 14.375C7.5 14.5408 7.56585 14.6997 7.68306 14.8169C7.80027 14.9342 7.95924 15 8.125 15H11.875C12.0408 15 12.1997 14.9342 12.3169 14.8169C12.4342 14.6997 12.5 14.5408 12.5 14.375C12.5 14.2092 12.4342 14.0503 12.3169 13.9331C12.1997 13.8158 12.0408 13.75 11.875 13.75Z" fill="#525255"/></svg>
                        </div>
                        <div className="a2">Sort by: Popular</div>
                    </div>
                </div>
            </div>
            <div className="l3">
        <div className="l3-inner">
          {projects.length === 0 ? (
            <div className="no-results">No courses found for "{searchQuery}"</div>
          ) : (
            projects.map((topic, idx) => (
              <div className="exploreCourse-card" key={idx}>
                <div className="l1">
                  <img src={topic.image} alt={topic.title} />
                </div>

                <div className="l2">{topic.title}</div>

                <div className="l3">
                  <div className="a">
                    <div className="a1" >
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.00024 1.35156C7.85333 1.35164 8.68301 1.63142 9.36157 2.14844C10.0403 2.66562 10.5307 3.39212 10.7571 4.21484C10.9833 5.03743 10.9331 5.9117 10.6145 6.70312C10.2959 7.49448 9.72635 8.15923 8.99341 8.5957L8.91528 8.64258L9.00122 8.66992C10.3965 9.12585 11.6051 10.0565 12.4329 11.3506L12.593 11.6143C12.6207 11.6594 12.6397 11.7104 12.6477 11.7627C12.6556 11.8149 12.6529 11.8687 12.6399 11.9199C12.6269 11.9711 12.6034 12.0194 12.5715 12.0615C12.5396 12.1037 12.4991 12.1386 12.4534 12.165C12.4076 12.1914 12.3573 12.2092 12.3049 12.2158C12.2524 12.2224 12.1986 12.2185 12.1477 12.2041C12.0968 12.1898 12.0494 12.1648 12.0081 12.1318C11.9873 12.1153 11.9684 12.0964 11.9514 12.0762L11.9065 12.0107V12.0098L11.7024 11.6826C10.6386 10.0877 8.90747 9.14661 7.00024 9.14648C5.09283 9.14648 3.36096 10.0875 2.29712 11.6826L2.09302 12.0098V12.0107C2.06775 12.0573 2.03282 12.0988 1.99146 12.1318C1.95015 12.1648 1.90266 12.1898 1.85181 12.2041C1.80108 12.2184 1.74785 12.2223 1.69556 12.2158C1.64302 12.2092 1.59199 12.1915 1.54614 12.165C1.50036 12.1386 1.4599 12.1037 1.42798 12.0615C1.39609 12.0194 1.37265 11.9711 1.35962 11.9199C1.34662 11.8687 1.34486 11.815 1.35278 11.7627C1.35678 11.7364 1.3632 11.7104 1.37231 11.6855L1.40649 11.6143C2.23442 10.1824 3.51019 9.15564 4.99829 8.66992L5.08423 8.64258L5.00708 8.5957C4.27388 8.15922 3.70364 7.49469 3.38501 6.70312C3.06642 5.91164 3.01714 5.03749 3.24341 4.21484C3.46976 3.39212 3.95925 2.66562 4.63794 2.14844C5.31663 1.63127 6.14697 1.35156 7.00024 1.35156ZM7.60571 2.20605C7.00369 2.0863 6.37886 2.14694 5.81177 2.38184C5.24477 2.61675 4.76016 3.01509 4.41919 3.52539C4.07823 4.03573 3.89673 4.63624 3.89673 5.25L3.90063 5.40332C3.93942 6.1701 4.26047 6.89789 4.80591 7.44336C5.35135 7.9888 6.07919 8.30981 6.84595 8.34863L7.00024 8.35352C7.61386 8.35344 8.21365 8.17095 8.72388 7.83008C9.2342 7.48909 9.63253 7.00453 9.86743 6.4375C10.1023 5.87057 10.1638 5.24639 10.0442 4.64453C9.92444 4.04251 9.62861 3.48872 9.19458 3.05469C8.76066 2.6208 8.20753 2.32585 7.60571 2.20605Z" fill="#818183" stroke="#818183" stroke-width="0.0820312"/></svg>
                    </div>
                    <div className="a2">{topic.noOfstu} Students</div>
                  </div>
                  <div className="a">
                    <div className="a1">
                        <svg width="12" height="10" viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.8125 0.1875H1.1875C0.955436 0.1875 0.732876 0.279687 0.568782 0.443782C0.404687 0.607876 0.3125 0.830436 0.3125 1.0625V8.9375C0.3125 9.16956 0.404687 9.39212 0.568782 9.55622C0.732876 9.72031 0.955436 9.8125 1.1875 9.8125H10.8125C11.0446 9.8125 11.2671 9.72031 11.4312 9.55622C11.5953 9.39212 11.6875 9.16956 11.6875 8.9375V1.0625C11.6875 0.830436 11.5953 0.607876 11.4312 0.443782C11.2671 0.279687 11.0446 0.1875 10.8125 0.1875ZM10.8125 8.9375H1.1875V1.0625H10.8125V8.9375ZM9.0625 3.25C9.0625 3.36603 9.01641 3.47731 8.93436 3.55936C8.85231 3.64141 8.74103 3.6875 8.625 3.6875H3.375C3.25897 3.6875 3.14769 3.64141 3.06564 3.55936C2.98359 3.47731 2.9375 3.36603 2.9375 3.25C2.9375 3.13397 2.98359 3.02269 3.06564 2.94064C3.14769 2.85859 3.25897 2.8125 3.375 2.8125H8.625C8.74103 2.8125 8.85231 2.85859 8.93436 2.94064C9.01641 3.02269 9.0625 3.13397 9.0625 3.25ZM9.0625 5C9.0625 5.11603 9.01641 5.22731 8.93436 5.30936C8.85231 5.39141 8.74103 5.4375 8.625 5.4375H3.375C3.25897 5.4375 3.14769 5.39141 3.06564 5.30936C2.98359 5.22731 2.9375 5.11603 2.9375 5C2.9375 4.88397 2.98359 4.77269 3.06564 4.69064C3.14769 4.60859 3.25897 4.5625 3.375 4.5625H8.625C8.74103 4.5625 8.85231 4.60859 8.93436 4.69064C9.01641 4.77269 9.0625 4.88397 9.0625 5ZM9.0625 6.75C9.0625 6.86603 9.01641 6.97731 8.93436 7.05936C8.85231 7.14141 8.74103 7.1875 8.625 7.1875H3.375C3.25897 7.1875 3.14769 7.14141 3.06564 7.05936C2.98359 6.97731 2.9375 6.86603 2.9375 6.75C2.9375 6.63397 2.98359 6.52269 3.06564 6.44064C3.14769 6.35859 3.25897 6.3125 3.375 6.3125H8.625C8.74103 6.3125 8.85231 6.35859 8.93436 6.44064C9.01641 6.52269 9.0625 6.63397 9.0625 6.75Z" fill="#818183"/></svg>
                    </div>
                    <div className="a2">{topic.noOfMod} Modules</div>
                  </div>
                  <div className="a">
                    <div className="a1">
                        <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.25 1.35352C8.74705 1.35511 10.1826 1.95021 11.2412 3.00879C12.2998 4.06737 12.8949 5.50295 12.8965 7L12.8926 7.20898C12.8539 8.25238 12.5268 9.26626 11.9453 10.1367C11.3249 11.0652 10.4428 11.7894 9.41113 12.2168C8.37938 12.6442 7.24374 12.7559 6.14844 12.5381C5.05313 12.3202 4.04749 11.7819 3.25781 10.9922C2.46814 10.2025 1.92978 9.19687 1.71191 8.10156C1.49405 7.00626 1.60584 5.87062 2.0332 4.83887C2.46058 3.8072 3.18479 2.92509 4.11328 2.30469C4.98374 1.72318 5.99762 1.39606 7.04102 1.35742L7.25 1.35352ZM9.10742 2.51562C8.22057 2.14829 7.2442 2.05199 6.30273 2.23926C5.36136 2.42657 4.49707 2.88965 3.81836 3.56836C3.13965 4.24707 2.67657 5.11136 2.48926 6.05273C2.30199 6.9942 2.39829 7.97057 2.76562 8.85742C3.13297 9.74426 3.75558 10.5018 4.55371 11.0352C5.25218 11.5019 6.05789 11.7781 6.8916 11.8398L7.25 11.8535C8.53677 11.8521 9.77078 11.3405 10.6807 10.4307C11.5905 9.52078 12.1021 8.28677 12.1035 7L12.0898 6.6416C12.0281 5.80789 11.7519 5.00218 11.2852 4.30371C10.7518 3.50558 9.99426 2.88297 9.10742 2.51562ZM7.25 3.54102C7.35515 3.54102 7.45592 3.58287 7.53027 3.65723C7.60463 3.73158 7.64648 3.83235 7.64648 3.9375V6.60352H10.3125C10.4177 6.60352 10.5184 6.64537 10.5928 6.71973C10.6671 6.79408 10.709 6.89485 10.709 7C10.709 7.10515 10.6671 7.20592 10.5928 7.28027C10.5184 7.35463 10.4177 7.39648 10.3125 7.39648H7.25C7.14485 7.39648 7.04408 7.35463 6.96973 7.28027C6.89537 7.20592 6.85352 7.10515 6.85352 7V3.9375C6.85352 3.83235 6.89537 3.73158 6.96973 3.65723C7.04408 3.58287 7.14485 3.54102 7.25 3.54102Z" fill="#818183" stroke="#818183" stroke-width="0.0820312"/></svg>
                    </div>
                    <div className="a2">{topic.hr}h {topic.min}m</div>
                  </div>
                </div>

                <div className="l4">
                  <div className="l41">
                    <img src='/images/dp.jpg' alt='Mentor' />
                  </div>
                  <div className="l42">{fullName}</div>
                </div>
              </div>
            ))
          )}
        </div>
      </div>
    </div>
  );
}